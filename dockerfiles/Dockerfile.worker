FROM python:3.6
MAINTAINER "Vladislav Ladenkov <waryak2012@mail.ru>"

WORKDIR /

COPY src/algo ./src/algo
COPY src/network ./src/network
COPY requirements.txt /requirements.txt

RUN pip install --upgrade pip
RUN pip install -r /requirements.txt

ENV ROLE worker
ENV CONFIG /mnt/configs/config_worker.yml

WORKDIR /src/network

ENTRYPOINT ["celery", "-A", "messages", "worker", "--concurrency=4", "--loglevel=info"]
